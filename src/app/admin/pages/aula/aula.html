<div class="page-content">

  <div class="tabs-wrapper">
    <button class="tab-item" [class.active]="vista === 'crear'" (click)="vista = 'crear'">
      <i class="fas fa-plus"></i>
      <span>Crear aula</span>
    </button>
    <button class="tab-item" [class.active]="vista === 'ver'" (click)="vista = 'ver'">
      <i class="fas fa-list"></i>
      <span>Ver aulas</span>
    </button>
  </div>

  <div *ngIf="vista === 'crear'" class="admin-card animate-fade-in">
    <div class="card-header">
      <h2>Crear Nueva Aula</h2>
      <p>Complete la información para habilitar un nuevo espacio de estudio.</p>
    </div>

    <form (ngSubmit)="crearAula()" #aulaFormulario="ngForm">
      <div class="form-grid">
        <div class="form-group">
          <label>Código del Aula</label>
          <input type="text" [(ngModel)]="aulaForm.codigo" name="codigo" placeholder="Ej: L101" required>
        </div>

        <div class="form-group">
          <label>Capacidad</label>
          <input type="number" [(ngModel)]="aulaForm.capacidad" name="capacidad" required>
        </div>

        <div class="form-group">
          <label>Curso</label>
          <select [(ngModel)]="aulaForm.id_curso" name="id_curso" required class="modern-select">
            <option value="" disabled selected>Seleccione un curso...</option>
            <option *ngFor="let c of cursos" [value]="c.id">{{c.nombre}}</option>
          </select>
        </div>

        <div class="form-group">
          <label>Días de clase</label>
          <input type="text" [(ngModel)]="aulaForm.dias" name="dias" placeholder="Lunes y Martes" required>
        </div>

        <div class="form-group full-width">
          <label>Profesor Asignado</label>
          <select [(ngModel)]="aulaForm.id_profesor" name="id_profesor" required class="modern-select">
            <option value="" disabled selected>Seleccione un profesor...</option>
            <option *ngFor="let p of profesores" [value]="p.id">{{ p.nombre }} {{ p.apellido }}</option>
          </select>
        </div>
      </div>
      <div class="action-container">
        <button type="submit" [disabled]="aulaFormulario.invalid" class="btn-save">
          <i class="fas fa-save"></i>
          <span>Guardar Aula</span>
        </button>
      </div>
    </form>
  </div>

  <div *ngIf="vista === 'ver'" class="admin-card animate-fade-in">
    <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
      <div>
        <h2>Listado de Aulas</h2>
        <p>Aulas actualmente registradas en el sistema.</p>
      </div>
      
      <div class="search-box">
        <i class="fas fa-search"></i>
        <input type="text" placeholder="Buscar aula..." [(ngModel)]="busqueda">
      </div>
    </div>

    <table class="modern-table">
      <thead>
        <tr>
          <th>Información del Aula</th>
          <th>Capacidad</th>
          <th>Profesor / Horario</th>
          <th>Dias</th>
          <th style="text-align: right;">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let a of aulas">
          <td>
            <div class="user-avatar">{{ a?.codigo?.substring(0,1) || 'A' }}</div>
            <span>{{ a?.codigo }}</span>
          </td>
          <td>{{ a?.id_curso?.nombre || 'Sin curso' }}</td>
          <td>{{ a?.id_profesor?.nombre }} {{ a?.id_profesor?.apellido }}</td>
          <td>{{ a?.dias }}</td>
          <td>
            <button (click)="eliminarAula(a.id)" class="btn-delete">
              <i class="fas fa-trash"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>